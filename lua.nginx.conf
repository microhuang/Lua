#A
set_by_lua $date '
  return os.date("%Y%m%d");
';
access_log /var/log/nginx/$server_name.access.$date.log main;

#0 0 * * * /sbin/service nginx configtest && /sbin/service nginx reload



#B
#include /etc/nginx/date.var;
#access_log /var/log/nginx/access.$date.log lwww;

#echo "set \$date `date '+%Y_%m_%d'`;" > /etc/nginx/date.var
#/sbin/service nginx configtest && /sbin/service nginx reload

#0 0 * * * /etc/crontab/nginx_log.sh
